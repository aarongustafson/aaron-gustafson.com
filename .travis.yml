language: ruby
 
rvm:
  - 2.1
 
before_script:
  - chmod +x ./tasks/cibuild # or do this locally and commit
 
script:
  - bundle exec rake generate
  - bundle exec htmlproof ./_deploy --only-4xx --check-html --disable-external --allow-hash-href
 
# Assume bundler is being used, therefore
# the `install` step will run `bundle install` by default.
script: ./tasks/cibuild

env:
  global:
  - NOKOGIRI_USE_SYSTEM_LIBRARIES=true
 
branches:
  only:
    - source

sudo: false # route your build to the container-based infrastructure for a faster build