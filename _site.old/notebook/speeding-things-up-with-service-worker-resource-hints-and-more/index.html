<!DOCTYPE html><html id="aaron-gustafson_com" lang="en" dir="ltr"><head><meta charset="utf-8"><!--[if IE]>
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
		<meta http-equiv="cleartype" content="on">
	<![endif]--><title>Speeding Things Up With Service Worker, Resource Hints, and More, From the Notebook of Aaron Gustafson</title><meta property="og:title" content="Speeding Things Up With Service Worker, Resource Hints, and More, From the Notebook of Aaron Gustafson"><meta property="og:url" content="http://localhost:4000/notebook/speeding-things-up-with-service-worker-resource-hints-and-more/"><meta name="author" content="Aaron Gustafson"><meta property="og:type" content="website"><meta property="og:site_name" content="Aaron Gustafson"><meta property="og:image" content="http://localhost:4000/i/og-logo.png"><meta property="og:locale" content="en_US"><meta property="og:description" content="User experience encompasses more than just the interface. Download speed, render performance, and the cost of accessing a site are often overlooked areas when it comes to the practice of UX, but th..."><meta name="description" content="User experience encompasses more than just the interface. Download speed, render performance, and the cost of accessing a site are often overlooked areas when it comes to the practice of UX, but th..."><meta name="twitter:card" value="summary"><meta name="twitter:site" value="@AaronGustafson"><link href="/atom.xml" rel="alternate" title="Posts and Links From the Notebook of Aaron Gustafson" type="application/atom+xml"><link href="/atom-latest-posts.xml" rel="alternate" title="Posts From the Notebook of Aaron Gustafson" type="application/atom+xml"><link href="/atom-latest-links.xml" rel="alternate" title="Links From the Notebook of Aaron Gustafson" type="application/atom+xml"><meta name="revisit-after" content="7 days"><meta name="ROBOTS" content="index,follow"><meta name="robots" content="NOODP"><link href="https://plus.google.com/+AaronGustafson?rel=author" rel="publisher"><meta property="fb:admins" content="100002880350996"><link rel="pingback" href="https://webmention.io/aaron-gustafson.com/xmlrpc"><link rel="webmention" href="https://webmention.io/aaron-gustafson.com/webmention"><link rel="amphtml" href="http://localhost:4000/amp/notebook/speeding-things-up-with-service-worker-resource-hints-and-more"><link href="//favicon.png" rel="icon"><link rel="stylesheet" href="/c/default.min.css" media="all"><!--[if gt IE 8]><!--><link rel="stylesheet" href="/c/advanced.min.css" media="only screen"><!--<![endif]--><!--[if (IE 8)&(!IEMobile)]>
	<link rel="stylesheet" href="/c/old-ie.min.css">
<![endif]--><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="MobileOptimized" content="width"><meta name="HandheldFriendly" content="true"><script>(function(d){var config={kitId:'jje3afr',scriptTimeout:3000},h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/\bwf-loading\b/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='//use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config);}catch(e){}};s.parentNode.insertBefore(tk,s);})(document);</script><script async>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
	  ga('create', 'UA-176472-5', 'auto');
	  ga('send', 'pageview');</script></head><body><header role="banner" class="banner"><div class="layout-container"><h1 class="site-title"><a href="/">Aaron Gustafson</a></h1></div></header><div class="alert"><strong>This site is <a href="/notebook/a-grand-experiment/">undergoing an open redesign</a>, so if it looks strange, that’s why.</strong></div><main role="main"><div class="layout-container layout-container--blog"><article role="article" class="layout-container__primary h-entry"><div class="entry"><header class="entry__header"><h1 class="entry__title p-name">Speeding Things Up With Service Worker, Resource Hints, and More</h1><dl class="entry__meta"><dt>Published</dt><dd><b class="hidden">by <a class="p-author h-card" href="/about">Aaron Gustafson</a></b></dd><dt>Reading Time</dt><dd>15 minutes</dd><dt class="dont-read">Tagged</dt><dd class="dont-read"><span class="post__tags"><a class="post__tag" href="/notebook/tags/web-design">web design</a> <a class="post__tag" href="/notebook/tags/progressive-enhancement">progressive enhancement</a> <a class="post__tag" href="/notebook/tags/experiments">experiments</a> <a class="post__tag" href="/notebook/tags/web-development">web development</a></span></dd><dt class="dont-read">Reactions</dt><dd class="dont-read"><ul class="entry__jump-links"><li class="entry__jump entry__jump--comments"><a href="#disqus_thread" data-disqus-identifier="http://localhost:4000/notebook/speeding-things-up-with-service-worker-resource-hints-and-more/">Comments</a></li><li class="entry__jump entry__jump--webmentions"><a href="#webmentions">Webmentions</a></li></ul></dd></dl></header><div class="entry__content e-content"><p>User experience encompasses more than just the interface. Download speed, render performance, and the cost of accessing a site are often overlooked areas when it comes to the practice of UX, but they all affect how users experience what we build on the Web.</p><p>I’m always looking for ways to improve these aspects of my own site. And, since it’s my own personal playground, I often use it as a test-bed for new technologies, ideas, and techniques. My latest adventure was inspired by a bunch of <a href="https://www.aaron-gustafson.com/notebook/links/">articles and posts I’ve linked to recently</a>, especially</p><ul><li><a href="https://adactio.com/journal/9775">Jeremy Keith’s “My First Service Worker”</a>,</li><li><a href="https://css-tricks.com/serviceworker-for-offline/">Nicolas Bevacqua’s “Making a Simple Site Work Offline with ServiceWorker”</a>,</li><li><a href="http://deanhume.com/Home/BlogPost/service-workers--dynamic-responsive-images-using-webp-images/10132/">Dean Hume’s “Service Workers: Dynamic Responsive Images Using Webp Images”</a>, and</li><li><a href="https://medium.com/@cramforce/not-so-micro-optimizations-f867c47b832d#.satdv0fap">Malte Ubl’s “Not so micro optimizations”</a></li></ul><p>After reading these pieces, I decided to see how much I could do to improve the performance of this site, especially on posts with a lot of images and embedded code samples, like <a href="https://www.aaron-gustafson.com/notebook/labeled-with-love/">my recent post on form labels</a>.</p><h2 id="using-resource-hints">Using Resource Hints</h2><p>To kick things off, I followed Malte’s advice and used <a href="https://w3c.github.io/resource-hints/">Resource Hints</a> to <em>prime the pump</em> for any third-party servers hosting assets I use frequently (e.g. Disqus, Twitter, etc.). I used the code Malte references in <a href="https://github.com/ampproject/amphtml">the AMP Project</a> as my starting point and <a href="https://github.com/aarongustafson/aarongustafson.github.io/blob/source/source/_javascript/main/resource-hints.js">added two new methods (<code class="highlighter-rouge">preconnect()</code> and <code class="highlighter-rouge">prefetch()</code>) to my global <code class="highlighter-rouge">AG</code> object</a>. With that library code in place, I can call those methods as necessary from within my other JavaScript files. Here’s a simplified extract from <a href="https://github.com/aarongustafson/aarongustafson.github.io/blob/source/source/_javascript/post/disqus.js">my Disqus integration script</a>:</p><div><link rel="stylesheet" href="https://assets-cdn.github.com/assets/gist-embed-51ae8299bd14b6c42fb20b0ce07f643175347abaca051f9c55e114bfc98b10b1.css"><div id="gist28197221" class="gist"><div class="gist-file"><div class="gist-data"><div class="js-gist-file-update-container js-task-list-container file-box"><div id="file-resource-hints-sample-js" class="file"><div itemprop="text" class="blob-wrapper data type-javascript"><table class="highlight tab-size js-file-line-container" data-tab-size="8"><tr><td id="file-resource-hints-sample-js-L1" class="blob-num js-line-number" data-line-number="1"></td><td id="file-resource-hints-sample-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k">if</span> ( <span class="pl-s"><span class="pl-pds">&#39;</span>AG<span class="pl-pds">&#39;</span></span> <span class="pl-k">in</span> <span class="pl-c1">window</span> <span class="pl-k">&amp;&amp;</span> <span class="pl-s"><span class="pl-pds">&#39;</span>preconnect<span class="pl-pds">&#39;</span></span> <span class="pl-k">in</span> <span class="pl-c1">window</span>.<span class="pl-c1">AG</span> ) {</td></tr><tr><td id="file-resource-hints-sample-js-L2" class="blob-num js-line-number" data-line-number="2"></td><td id="file-resource-hints-sample-js-LC2" class="blob-code blob-code-inner js-file-line"><span class="pl-c1">window</span>.<span class="pl-c1">AG</span>.<span class="pl-en">preconnect</span>( <span class="pl-s"><span class="pl-pds">&#39;</span>//disqus.com/<span class="pl-pds">&#39;</span></span> );</td></tr><tr><td id="file-resource-hints-sample-js-L3" class="blob-num js-line-number" data-line-number="3"></td><td id="file-resource-hints-sample-js-LC3" class="blob-code blob-code-inner js-file-line"><span class="pl-c1">window</span>.<span class="pl-c1">AG</span>.<span class="pl-en">prefetch</span>( <span class="pl-s"><span class="pl-pds">&#39;</span>//<span class="pl-pds">&#39;</span></span> <span class="pl-k">+</span> disqus_shortname <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">&#39;</span>.disqus.com/count.js<span class="pl-pds">&#39;</span></span> );</td></tr><tr><td id="file-resource-hints-sample-js-L4" class="blob-num js-line-number" data-line-number="4"></td><td id="file-resource-hints-sample-js-LC4" class="blob-code blob-code-inner js-file-line">}</td></tr></table></div></div></div></div><div class="gist-meta"><a href="https://gist.github.com/aarongustafson/7f05709cca9293e4efea/raw/b6ca32d30643137603def7b4805d7bdcbfe63137/resource-hints-sample.js" style="float:right">view raw</a> <a href="https://gist.github.com/aarongustafson/7f05709cca9293e4efea#file-resource-hints-sample-js">resource-hints-sample.js</a> hosted with &#10084; by <a href="https://github.com">GitHub</a></div></div></div></div><p>While a minor addition, the speed improvement in <a href="http://caniuse.com/#search=resource%20hints">supporting browsers</a> was noticeable.<sup id="fnref:1"><a href="#fn:1" class="footnote">1</a></sup></p><h2 id="integrating-service-worker">Integrating Service Worker</h2><p>With that in the bag, I set about making my first <a href="http://www.w3.org/TR/service-workers/">Service Worker</a>. I started off gently, using Dean’s piece as a guide. I added a WebP conversion bit to <a href="https://github.com/aarongustafson/aarongustafson.github.io/blob/source/tasks/gulp/images.js">my image processing Gulp task</a> to get the files in place and then I created the Service Worker. By default, <a href="https://gist.github.com/deanhume/c04478df744ce833925c#file-client-hints-service-worker-js">Dean’s code</a> converts <em>all</em> JPG and PNG requests to WebP responses, so I set it up to limit the requests to only those files being requested directly from my server. I have no way of knowing if WebP equivalents of every JPG and PNG exist on the open web (probably not), but I know they exist on my server. Here’s the updated code:</p><div><link rel="stylesheet" href="https://assets-cdn.github.com/assets/gist-embed-51ae8299bd14b6c42fb20b0ce07f643175347abaca051f9c55e114bfc98b10b1.css"><div id="gist28206589" class="gist"><div class="gist-file"><div class="gist-data"><div class="js-gist-file-update-container js-task-list-container file-box"><div id="file-webp-service-worker-js" class="file"><div itemprop="text" class="blob-wrapper data type-javascript"><table class="highlight tab-size js-file-line-container" data-tab-size="8"><tr><td id="file-webp-service-worker-js-L1" class="blob-num js-line-number" data-line-number="1"></td><td id="file-webp-service-worker-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-s"><span class="pl-pds">&quot;</span>use strict<span class="pl-pds">&quot;</span></span>;</td></tr><tr><td id="file-webp-service-worker-js-L2" class="blob-num js-line-number" data-line-number="2"></td><td id="file-webp-service-worker-js-LC2" class="blob-code blob-code-inner js-file-line"></td></tr><tr><td id="file-webp-service-worker-js-L3" class="blob-num js-line-number" data-line-number="3"></td><td id="file-webp-service-worker-js-LC3" class="blob-code blob-code-inner js-file-line"><span class="pl-smi">self</span>.<span class="pl-en">addEventListener</span>(<span class="pl-s"><span class="pl-pds">&#39;</span>fetch<span class="pl-pds">&#39;</span></span>, <span class="pl-k">function</span>(<span class="pl-c1">event</span>) {</td></tr><tr><td id="file-webp-service-worker-js-L4" class="blob-num js-line-number" data-line-number="4"></td><td id="file-webp-service-worker-js-LC4" class="blob-code blob-code-inner js-file-line"></td></tr><tr><td id="file-webp-service-worker-js-L5" class="blob-num js-line-number" data-line-number="5"></td><td id="file-webp-service-worker-js-LC5" class="blob-code blob-code-inner js-file-line"><span class="pl-k">var</span> request <span class="pl-k">=</span> <span class="pl-c1">event</span>.<span class="pl-smi">request</span>,</td></tr><tr><td id="file-webp-service-worker-js-L6" class="blob-num js-line-number" data-line-number="6"></td><td id="file-webp-service-worker-js-LC6" class="blob-code blob-code-inner js-file-line">url <span class="pl-k">=</span> <span class="pl-smi">request</span>.<span class="pl-smi">url</span>,</td></tr><tr><td id="file-webp-service-worker-js-L7" class="blob-num js-line-number" data-line-number="7"></td><td id="file-webp-service-worker-js-LC7" class="blob-code blob-code-inner js-file-line">url_object <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">URL</span>( url ),</td></tr><tr><td id="file-webp-service-worker-js-L8" class="blob-num js-line-number" data-line-number="8"></td><td id="file-webp-service-worker-js-LC8" class="blob-code blob-code-inner js-file-line">re_jpg_or_png <span class="pl-k">=</span><span class="pl-sr"> <span class="pl-pds">/</span><span class="pl-cce">\\.</span>(?:jpg<span class="pl-k">|</span>png)<span class="pl-k">$</span><span class="pl-pds">/</span></span>,</td></tr><tr><td id="file-webp-service-worker-js-L9" class="blob-num js-line-number" data-line-number="9"></td><td id="file-webp-service-worker-js-LC9" class="blob-code blob-code-inner js-file-line">supports_webp <span class="pl-k">=</span> <span class="pl-c1">false</span>, <span class="pl-c">// pessimism</span></td></tr><tr><td id="file-webp-service-worker-js-L10" class="blob-num js-line-number" data-line-number="10"></td><td id="file-webp-service-worker-js-LC10" class="blob-code blob-code-inner js-file-line">webp_url;</td></tr><tr><td id="file-webp-service-worker-js-L11" class="blob-num js-line-number" data-line-number="11"></td><td id="file-webp-service-worker-js-LC11" class="blob-code blob-code-inner js-file-line"></td></tr><tr><td id="file-webp-service-worker-js-L12" class="blob-num js-line-number" data-line-number="12"></td><td id="file-webp-service-worker-js-LC12" class="blob-code blob-code-inner js-file-line"><span class="pl-c">// Check if the image is a local jpg or png</span></td></tr><tr><td id="file-webp-service-worker-js-L13" class="blob-num js-line-number" data-line-number="13"></td><td id="file-webp-service-worker-js-LC13" class="blob-code blob-code-inner js-file-line"><span class="pl-k">if</span> ( <span class="pl-smi">re_jpg_or_png</span>.<span class="pl-c1">test</span>( <span class="pl-smi">request</span>.<span class="pl-smi">url</span> ) <span class="pl-k">&amp;&amp;</span></td></tr><tr><td id="file-webp-service-worker-js-L14" class="blob-num js-line-number" data-line-number="14"></td><td id="file-webp-service-worker-js-LC14" class="blob-code blob-code-inner js-file-line"><span class="pl-smi">url_object</span>.<span class="pl-smi">origin</span> <span class="pl-k">==</span> <span class="pl-smi">location</span>.<span class="pl-smi">origin</span> ) {</td></tr><tr><td id="file-webp-service-worker-js-L15" class="blob-num js-line-number" data-line-number="15"></td><td id="file-webp-service-worker-js-LC15" class="blob-code blob-code-inner js-file-line"></td></tr><tr><td id="file-webp-service-worker-js-L16" class="blob-num js-line-number" data-line-number="16"></td><td id="file-webp-service-worker-js-LC16" class="blob-code blob-code-inner js-file-line"><span class="pl-c">// console.log(&#39;WORKER: caught a request for a local PNG or JPG&#39;);</span></td></tr><tr><td id="file-webp-service-worker-js-L17" class="blob-num js-line-number" data-line-number="17"></td><td id="file-webp-service-worker-js-LC17" class="blob-code blob-code-inner js-file-line"></td></tr><tr><td id="file-webp-service-worker-js-L18" class="blob-num js-line-number" data-line-number="18"></td><td id="file-webp-service-worker-js-LC18" class="blob-code blob-code-inner js-file-line"><span class="pl-c">// Inspect the accept header for WebP support</span></td></tr><tr><td id="file-webp-service-worker-js-L19" class="blob-num js-line-number" data-line-number="19"></td><td id="file-webp-service-worker-js-LC19" class="blob-code blob-code-inner js-file-line"><span class="pl-k">if</span> ( <span class="pl-smi">request</span>.<span class="pl-c1">headers</span>.<span class="pl-en">has</span>(<span class="pl-s"><span class="pl-pds">&#39;</span>accept<span class="pl-pds">&#39;</span></span>) )</td></tr><tr><td id="file-webp-service-worker-js-L20" class="blob-num js-line-number" data-line-number="20"></td><td id="file-webp-service-worker-js-LC20" class="blob-code blob-code-inner js-file-line">{</td></tr><tr><td id="file-webp-service-worker-js-L21" class="blob-num js-line-number" data-line-number="21"></td><td id="file-webp-service-worker-js-LC21" class="blob-code blob-code-inner js-file-line">supports_webp <span class="pl-k">=</span> <span class="pl-smi">request</span>.<span class="pl-c1">headers</span>.<span class="pl-en">get</span>(<span class="pl-s"><span class="pl-pds">&#39;</span>accept<span class="pl-pds">&#39;</span></span>).<span class="pl-en">includes</span>(<span class="pl-s"><span class="pl-pds">&#39;</span>webp<span class="pl-pds">&#39;</span></span>);</td></tr><tr><td id="file-webp-service-worker-js-L22" class="blob-num js-line-number" data-line-number="22"></td><td id="file-webp-service-worker-js-LC22" class="blob-code blob-code-inner js-file-line">}</td></tr><tr><td id="file-webp-service-worker-js-L23" class="blob-num js-line-number" data-line-number="23"></td><td id="file-webp-service-worker-js-LC23" class="blob-code blob-code-inner js-file-line"></td></tr><tr><td id="file-webp-service-worker-js-L24" class="blob-num js-line-number" data-line-number="24"></td><td id="file-webp-service-worker-js-LC24" class="blob-code blob-code-inner js-file-line"><span class="pl-c">// Browser supports WebP</span></td></tr><tr><td id="file-webp-service-worker-js-L25" class="blob-num js-line-number" data-line-number="25"></td><td id="file-webp-service-worker-js-LC25" class="blob-code blob-code-inner js-file-line"><span class="pl-k">if</span> ( supports_webp )</td></tr><tr><td id="file-webp-service-worker-js-L26" class="blob-num js-line-number" data-line-number="26"></td><td id="file-webp-service-worker-js-LC26" class="blob-code blob-code-inner js-file-line">{</td></tr><tr><td id="file-webp-service-worker-js-L27" class="blob-num js-line-number" data-line-number="27"></td><td id="file-webp-service-worker-js-LC27" class="blob-code blob-code-inner js-file-line"><span class="pl-c">// Make the new URL</span></td></tr><tr><td id="file-webp-service-worker-js-L28" class="blob-num js-line-number" data-line-number="28"></td><td id="file-webp-service-worker-js-LC28" class="blob-code blob-code-inner js-file-line">webp_url <span class="pl-k">=</span> <span class="pl-smi">url</span>.<span class="pl-c1">substr</span>(<span class="pl-c1">0</span>, <span class="pl-smi">url</span>.<span class="pl-c1">lastIndexOf</span>(<span class="pl-s"><span class="pl-pds">&#39;</span>.<span class="pl-pds">&#39;</span></span>)) <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">&#39;</span>.webp<span class="pl-pds">&#39;</span></span>;</td></tr><tr><td id="file-webp-service-worker-js-L29" class="blob-num js-line-number" data-line-number="29"></td><td id="file-webp-service-worker-js-LC29" class="blob-code blob-code-inner js-file-line"></td></tr><tr><td id="file-webp-service-worker-js-L30" class="blob-num js-line-number" data-line-number="30"></td><td id="file-webp-service-worker-js-LC30" class="blob-code blob-code-inner js-file-line"><span class="pl-c1">event</span>.<span class="pl-en">respondWith</span>(</td></tr><tr><td id="file-webp-service-worker-js-L31" class="blob-num js-line-number" data-line-number="31"></td><td id="file-webp-service-worker-js-LC31" class="blob-code blob-code-inner js-file-line"><span class="pl-en">fetch</span>(</td></tr><tr><td id="file-webp-service-worker-js-L32" class="blob-num js-line-number" data-line-number="32"></td><td id="file-webp-service-worker-js-LC32" class="blob-code blob-code-inner js-file-line">webp_url,</td></tr><tr><td id="file-webp-service-worker-js-L33" class="blob-num js-line-number" data-line-number="33"></td><td id="file-webp-service-worker-js-LC33" class="blob-code blob-code-inner js-file-line">{ mode<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no-cors<span class="pl-pds">&#39;</span></span> }</td></tr><tr><td id="file-webp-service-worker-js-L34" class="blob-num js-line-number" data-line-number="34"></td><td id="file-webp-service-worker-js-LC34" class="blob-code blob-code-inner js-file-line">)</td></tr><tr><td id="file-webp-service-worker-js-L35" class="blob-num js-line-number" data-line-number="35"></td><td id="file-webp-service-worker-js-LC35" class="blob-code blob-code-inner js-file-line">);</td></tr><tr><td id="file-webp-service-worker-js-L36" class="blob-num js-line-number" data-line-number="36"></td><td id="file-webp-service-worker-js-LC36" class="blob-code blob-code-inner js-file-line">}</td></tr><tr><td id="file-webp-service-worker-js-L37" class="blob-num js-line-number" data-line-number="37"></td><td id="file-webp-service-worker-js-LC37" class="blob-code blob-code-inner js-file-line">}</td></tr><tr><td id="file-webp-service-worker-js-L38" class="blob-num js-line-number" data-line-number="38"></td><td id="file-webp-service-worker-js-LC38" class="blob-code blob-code-inner js-file-line">});</td></tr></table></div></div></div></div><div class="gist-meta"><a href="https://gist.github.com/aarongustafson/ff6aef09a10038e1728a/raw/078af4350bca2900c2d4dc10b3827948bc401c9b/webp-service-worker.js" style="float:right">view raw</a> <a href="https://gist.github.com/aarongustafson/ff6aef09a10038e1728a#file-webp-service-worker-js">webp-service-worker.js</a> hosted with &#10084; by <a href="https://github.com">GitHub</a></div></div></div></div><p>When I began tucking to the caching possibilities of Service Workers, following Nicolas’ and Jeremy’s posts, I <a href="https://github.com/aarongustafson/aarongustafson.github.io/blob/source/source/_javascript/serviceworker/fetch-cached.js">opted to tweak Nicholas’ caching setup a bit</a>. I’m still not completely thrilled with it, but it’s a work in progress. I’m sure I will tweak as I get more familiar with the technology.</p><p>To keep my Service Worker code modularized (like my other JavaScript code), I opted to <a href="https://github.com/aarongustafson/aarongustafson.github.io/tree/source/source/_javascript/serviceworker">break it up into separate files</a> and am using Gulp to merge them all together and move the combined file into the root of the site. If you’d like to follow a similar path, feel free to adapt this Gulp task (which builds all of my JavaScript):</p><div><link rel="stylesheet" href="https://assets-cdn.github.com/assets/gist-embed-51ae8299bd14b6c42fb20b0ce07f643175347abaca051f9c55e114bfc98b10b1.css"><div id="gist28197221" class="gist"><div class="gist-file"><div class="gist-data"><div class="js-gist-file-update-container js-task-list-container file-box"><div id="file-gulp-scripts-js" class="file"><div itemprop="text" class="blob-wrapper data type-javascript"><table class="highlight tab-size js-file-line-container" data-tab-size="8"><tr><td id="file-gulp-scripts-js-L1" class="blob-num js-line-number" data-line-number="1"></td><td id="file-gulp-scripts-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k">var</span> gulp <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">&#39;</span>gulp<span class="pl-pds">&#39;</span></span>),</td></tr><tr><td id="file-gulp-scripts-js-L2" class="blob-num js-line-number" data-line-number="2"></td><td id="file-gulp-scripts-js-LC2" class="blob-code blob-code-inner js-file-line">path <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">&#39;</span>path<span class="pl-pds">&#39;</span></span>),</td></tr><tr><td id="file-gulp-scripts-js-L3" class="blob-num js-line-number" data-line-number="3"></td><td id="file-gulp-scripts-js-LC3" class="blob-code blob-code-inner js-file-line">folder <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">&#39;</span>gulp-folders<span class="pl-pds">&#39;</span></span>),</td></tr><tr><td id="file-gulp-scripts-js-L4" class="blob-num js-line-number" data-line-number="4"></td><td id="file-gulp-scripts-js-LC4" class="blob-code blob-code-inner js-file-line">gulpIf <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">&#39;</span>gulp-if<span class="pl-pds">&#39;</span></span>),</td></tr><tr><td id="file-gulp-scripts-js-L5" class="blob-num js-line-number" data-line-number="5"></td><td id="file-gulp-scripts-js-LC5" class="blob-code blob-code-inner js-file-line">insert <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">&#39;</span>gulp-insert<span class="pl-pds">&#39;</span></span>),</td></tr><tr><td id="file-gulp-scripts-js-L6" class="blob-num js-line-number" data-line-number="6"></td><td id="file-gulp-scripts-js-LC6" class="blob-code blob-code-inner js-file-line">concat <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">&#39;</span>gulp-concat<span class="pl-pds">&#39;</span></span>),</td></tr><tr><td id="file-gulp-scripts-js-L7" class="blob-num js-line-number" data-line-number="7"></td><td id="file-gulp-scripts-js-LC7" class="blob-code blob-code-inner js-file-line">uglify <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">&#39;</span>gulp-uglify<span class="pl-pds">&#39;</span></span>),</td></tr><tr><td id="file-gulp-scripts-js-L8" class="blob-num js-line-number" data-line-number="8"></td><td id="file-gulp-scripts-js-LC8" class="blob-code blob-code-inner js-file-line">notify <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">&#39;</span>gulp-notify<span class="pl-pds">&#39;</span></span>),</td></tr><tr><td id="file-gulp-scripts-js-L9" class="blob-num js-line-number" data-line-number="9"></td><td id="file-gulp-scripts-js-LC9" class="blob-code blob-code-inner js-file-line">rename <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">&#39;</span>gulp-rename<span class="pl-pds">&#39;</span></span>),</td></tr><tr><td id="file-gulp-scripts-js-L10" class="blob-num js-line-number" data-line-number="10"></td><td id="file-gulp-scripts-js-LC10" class="blob-code blob-code-inner js-file-line"><span class="pl-c">//handleErrors = require(&#39;handleErrors&#39;),</span></td></tr><tr><td id="file-gulp-scripts-js-L11" class="blob-num js-line-number" data-line-number="11"></td><td id="file-gulp-scripts-js-LC11" class="blob-code blob-code-inner js-file-line">source_folder <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>source/_javascript<span class="pl-pds">&#39;</span></span>,</td></tr><tr><td id="file-gulp-scripts-js-L12" class="blob-num js-line-number" data-line-number="12"></td><td id="file-gulp-scripts-js-LC12" class="blob-code blob-code-inner js-file-line">destination_root <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>source<span class="pl-pds">&#39;</span></span>,</td></tr><tr><td id="file-gulp-scripts-js-L13" class="blob-num js-line-number" data-line-number="13"></td><td id="file-gulp-scripts-js-LC13" class="blob-code blob-code-inner js-file-line">destination_folder <span class="pl-k">=</span> destination_root <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">&#39;</span>/j<span class="pl-pds">&#39;</span></span>,</td></tr><tr><td id="file-gulp-scripts-js-L14" class="blob-num js-line-number" data-line-number="14"></td><td id="file-gulp-scripts-js-LC14" class="blob-code blob-code-inner js-file-line">public_root <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>public<span class="pl-pds">&#39;</span></span></td></tr><tr><td id="file-gulp-scripts-js-L15" class="blob-num js-line-number" data-line-number="15"></td><td id="file-gulp-scripts-js-LC15" class="blob-code blob-code-inner js-file-line">public_folder <span class="pl-k">=</span> public_root <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">&#39;</span>/j<span class="pl-pds">&#39;</span></span>,</td></tr><tr><td id="file-gulp-scripts-js-L16" class="blob-num js-line-number" data-line-number="16"></td><td id="file-gulp-scripts-js-LC16" class="blob-code blob-code-inner js-file-line">rename_serviceworker <span class="pl-k">=</span> <span class="pl-en">rename</span>({</td></tr><tr><td id="file-gulp-scripts-js-L17" class="blob-num js-line-number" data-line-number="17"></td><td id="file-gulp-scripts-js-LC17" class="blob-code blob-code-inner js-file-line">dirname<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">&quot;</span>../<span class="pl-pds">&quot;</span></span></td></tr><tr><td id="file-gulp-scripts-js-L18" class="blob-num js-line-number" data-line-number="18"></td><td id="file-gulp-scripts-js-LC18" class="blob-code blob-code-inner js-file-line">});</td></tr><tr><td id="file-gulp-scripts-js-L19" class="blob-num js-line-number" data-line-number="19"></td><td id="file-gulp-scripts-js-LC19" class="blob-code blob-code-inner js-file-line"></td></tr><tr><td id="file-gulp-scripts-js-L20" class="blob-num js-line-number" data-line-number="20"></td><td id="file-gulp-scripts-js-LC20" class="blob-code blob-code-inner js-file-line"><span class="pl-smi">gulp</span>.<span class="pl-en">task</span>(<span class="pl-s"><span class="pl-pds">&#39;</span>scripts<span class="pl-pds">&#39;</span></span>, <span class="pl-en">folder</span>(source_folder, <span class="pl-k">function</span>(<span class="pl-smi">folder</span>){</td></tr><tr><td id="file-gulp-scripts-js-L21" class="blob-num js-line-number" data-line-number="21"></td><td id="file-gulp-scripts-js-LC21" class="blob-code blob-code-inner js-file-line"><span class="pl-k">return</span> <span class="pl-smi">gulp</span>.<span class="pl-en">src</span>(<span class="pl-smi">path</span>.<span class="pl-c1">join</span>(source_folder, folder, <span class="pl-s"><span class="pl-pds">&#39;</span>*.js<span class="pl-pds">&#39;</span></span>))</td></tr><tr><td id="file-gulp-scripts-js-L22" class="blob-num js-line-number" data-line-number="22"></td><td id="file-gulp-scripts-js-LC22" class="blob-code blob-code-inner js-file-line">.<span class="pl-en">pipe</span>(<span class="pl-en">concat</span>(folder <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">&#39;</span>.js<span class="pl-pds">&#39;</span></span>))</td></tr><tr><td id="file-gulp-scripts-js-L23" class="blob-num js-line-number" data-line-number="23"></td><td id="file-gulp-scripts-js-LC23" class="blob-code blob-code-inner js-file-line">.<span class="pl-en">pipe</span>(<span class="pl-smi">insert</span>.<span class="pl-en">transform</span>(<span class="pl-k">function</span>(<span class="pl-smi">contents</span>, <span class="pl-smi">file</span>){</td></tr><tr><td id="file-gulp-scripts-js-L24" class="blob-num js-line-number" data-line-number="24"></td><td id="file-gulp-scripts-js-LC24" class="blob-code blob-code-inner js-file-line"><span class="pl-c">// insert a build time variable</span></td></tr><tr><td id="file-gulp-scripts-js-L25" class="blob-num js-line-number" data-line-number="25"></td><td id="file-gulp-scripts-js-LC25" class="blob-code blob-code-inner js-file-line"><span class="pl-k">var</span> build_time <span class="pl-k">=</span> (<span class="pl-k">new</span> <span class="pl-en">Date</span>()).<span class="pl-c1">getTime</span>() <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">&#39;</span><span class="pl-pds">&#39;</span></span>;</td></tr><tr><td id="file-gulp-scripts-js-L26" class="blob-num js-line-number" data-line-number="26"></td><td id="file-gulp-scripts-js-LC26" class="blob-code blob-code-inner js-file-line"><span class="pl-k">return</span> <span class="pl-smi">contents</span>.<span class="pl-c1">replace</span>( <span class="pl-s"><span class="pl-pds">&#39;</span>{{BUILD_TIME}}<span class="pl-pds">&#39;</span></span>, build_time );</td></tr><tr><td id="file-gulp-scripts-js-L27" class="blob-num js-line-number" data-line-number="27"></td><td id="file-gulp-scripts-js-LC27" class="blob-code blob-code-inner js-file-line">}))</td></tr><tr><td id="file-gulp-scripts-js-L28" class="blob-num js-line-number" data-line-number="28"></td><td id="file-gulp-scripts-js-LC28" class="blob-code blob-code-inner js-file-line">.<span class="pl-en">pipe</span>(<span class="pl-smi">gulp</span>.<span class="pl-en">dest</span>(destination_folder))</td></tr><tr><td id="file-gulp-scripts-js-L29" class="blob-num js-line-number" data-line-number="29"></td><td id="file-gulp-scripts-js-LC29" class="blob-code blob-code-inner js-file-line">.<span class="pl-en">pipe</span>(<span class="pl-smi">gulp</span>.<span class="pl-en">dest</span>(public_folder))</td></tr><tr><td id="file-gulp-scripts-js-L30" class="blob-num js-line-number" data-line-number="30"></td><td id="file-gulp-scripts-js-LC30" class="blob-code blob-code-inner js-file-line">.<span class="pl-en">pipe</span>(<span class="pl-en">rename</span>({suffix<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">&#39;</span>.min<span class="pl-pds">&#39;</span></span>}))</td></tr><tr><td id="file-gulp-scripts-js-L31" class="blob-num js-line-number" data-line-number="31"></td><td id="file-gulp-scripts-js-LC31" class="blob-code blob-code-inner js-file-line">.<span class="pl-en">pipe</span>(<span class="pl-en">uglify</span>())</td></tr><tr><td id="file-gulp-scripts-js-L32" class="blob-num js-line-number" data-line-number="32"></td><td id="file-gulp-scripts-js-LC32" class="blob-code blob-code-inner js-file-line">.<span class="pl-en">pipe</span>(<span class="pl-en">gulpIf</span>(folder<span class="pl-k">==</span><span class="pl-s"><span class="pl-pds">&#39;</span>serviceworker<span class="pl-pds">&#39;</span></span>,rename_serviceworker))</td></tr><tr><td id="file-gulp-scripts-js-L33" class="blob-num js-line-number" data-line-number="33"></td><td id="file-gulp-scripts-js-LC33" class="blob-code blob-code-inner js-file-line">.<span class="pl-en">pipe</span>(<span class="pl-smi">gulp</span>.<span class="pl-en">dest</span>(destination_folder))</td></tr><tr><td id="file-gulp-scripts-js-L34" class="blob-num js-line-number" data-line-number="34"></td><td id="file-gulp-scripts-js-LC34" class="blob-code blob-code-inner js-file-line">.<span class="pl-en">pipe</span>(<span class="pl-smi">gulp</span>.<span class="pl-en">dest</span>(public_folder))</td></tr><tr><td id="file-gulp-scripts-js-L35" class="blob-num js-line-number" data-line-number="35"></td><td id="file-gulp-scripts-js-LC35" class="blob-code blob-code-inner js-file-line">.<span class="pl-en">pipe</span>(<span class="pl-en">notify</span>({ message<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Scripts task complete<span class="pl-pds">&#39;</span></span> }));</td></tr><tr><td id="file-gulp-scripts-js-L36" class="blob-num js-line-number" data-line-number="36"></td><td id="file-gulp-scripts-js-LC36" class="blob-code blob-code-inner js-file-line"><span class="pl-c">//.on(&#39;error&#39;, handleErrors);</span></td></tr><tr><td id="file-gulp-scripts-js-L37" class="blob-num js-line-number" data-line-number="37"></td><td id="file-gulp-scripts-js-LC37" class="blob-code blob-code-inner js-file-line">}));</td></tr></table></div></div></div></div><div class="gist-meta"><a href="https://gist.github.com/aarongustafson/7f05709cca9293e4efea/raw/b6ca32d30643137603def7b4805d7bdcbfe63137/gulp-scripts.js" style="float:right">view raw</a> <a href="https://gist.github.com/aarongustafson/7f05709cca9293e4efea#file-gulp-scripts-js">gulp-scripts.js</a> hosted with &#10084; by <a href="https://github.com">GitHub</a></div></div></div></div><p>As most of the walkthroughs recommended that you version your Service Worker if you’re doing any caching, I set mine up to be auto-versioned by inserting a timestamp (lines 23-27, above) into my Service Worker header file (line 3, below):</p><div><link rel="stylesheet" href="https://assets-cdn.github.com/assets/gist-embed-51ae8299bd14b6c42fb20b0ce07f643175347abaca051f9c55e114bfc98b10b1.css"><div id="gist28197221" class="gist"><div class="gist-file"><div class="gist-data"><div class="js-gist-file-update-container js-task-list-container file-box"><div id="file-_header-js" class="file"><div itemprop="text" class="blob-wrapper data type-javascript"><table class="highlight tab-size js-file-line-container" data-tab-size="8"><tr><td id="file-_header-js-L1" class="blob-num js-line-number" data-line-number="1"></td><td id="file-_header-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-s"><span class="pl-pds">&#39;</span>use strict<span class="pl-pds">&#39;</span></span>;</td></tr><tr><td id="file-_header-js-L2" class="blob-num js-line-number" data-line-number="2"></td><td id="file-_header-js-LC2" class="blob-code blob-code-inner js-file-line"></td></tr><tr><td id="file-_header-js-L3" class="blob-num js-line-number" data-line-number="3"></td><td id="file-_header-js-LC3" class="blob-code blob-code-inner js-file-line"><span class="pl-k">var</span> version <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>v{{BUILD_TIME}}:<span class="pl-pds">&#39;</span></span>,</td></tr><tr><td id="file-_header-js-L4" class="blob-num js-line-number" data-line-number="4"></td><td id="file-_header-js-LC4" class="blob-code blob-code-inner js-file-line">default_avatar <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>https://www.gravatar.com/avatar/00000000000000000000000000000000?d=mm&amp;f=y<span class="pl-pds">&#39;</span></span>,</td></tr><tr><td id="file-_header-js-L5" class="blob-num js-line-number" data-line-number="5"></td><td id="file-_header-js-LC5" class="blob-code blob-code-inner js-file-line">missing_image <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>https://i.imgur.com/oWLuFAa.gif<span class="pl-pds">&#39;</span></span>;</td></tr></table></div></div></div></div><div class="gist-meta"><a href="https://gist.github.com/aarongustafson/7f05709cca9293e4efea/raw/b6ca32d30643137603def7b4805d7bdcbfe63137/_header.js" style="float:right">view raw</a> <a href="https://gist.github.com/aarongustafson/7f05709cca9293e4efea#file-_header-js">_header.js</a> hosted with &#10084; by <a href="https://github.com">GitHub</a></div></div></div></div><p>Service Workers are still pretty new (and <a href="http://caniuse.com/#feat=serviceworkers">modestly supported</a>), but it’s definitely interesting to see what’s possible using them. <a href="https://adactio.com/journal/9844">Like Jeremy</a>, I want to do a bit more exploration into caching and how it may actually <em>increase</em> the monetary cost of accessing a website if not used properly. Like any powerful tool, we need to wield it wisely.</p><figure id="fig-2015-11-20-01"><img src="https://media.giphy.com/media/dlmcYrvalMmAw/giphy.gif" alt="Animated GIF of a guy accidentally launching a board into his helper while power sanding."></figure><h2 id="making-gists-static">Making Gists Static</h2><p>On particularly code-heavy posts (yes, like this one), I make liberal use of Gists. They’re quite useful, but <a href="https://gist.github.com/BinaryMuse/803483">the Gist plugin for Jekyll</a>, while good, still requests a script from Github in order to load the pretty printed version of the Gist. On some posts, that can mean 5 or more additional network requests, not to mention execution time for the JavaScript. It’s yet another dependency that could prohibit you from quickly getting to the content you’re looking for. Additionally, <a href="https://gds.blog.gov.uk/2013/10/21/how-many-people-are-missing-out-on-javascript-enhancement/">if JavaScript should be available, but isn’t</a>, you get nothing (since the <code class="highlighter-rouge">noscript</code> content is only evaluated if JavaScript support isn’t available or if a user turns it off).</p><p>With all of this in mind, I decided to revise the plugin and make it capable of downloading the JavaScript code directly. It then extracts the HTML markup that the JavaScript would be writing into the page and just embeds it directly. It also caches the result, which is handy for speeding up the build process.</p><p>You can grab <a href="https://gist.github.com/aarongustafson/b98add8f3580f6707cf5">my fork of the Gist Jekyll Plugin as, well, a Gist</a>. It’s also <a href="https://github.com/aarongustafson/aarongustafson.github.io/blob/source/plugins/gist_tag.rb">in the source of this site on Github</a>.</p><h2 id="hopefully-a-little-faster">(Hopefully) A Little Faster</h2><p>All told, these changes have gotten the render time of this site down significantly across the board.<sup id="fnref:2"><a href="#fn:2" class="footnote">2</a></sup> Even more so on browsers that support Service Workers and Resource Hints. I’ll likely continue tweaking as I go, but I wanted to share my process, code, and thoughts in case any of it might be useful to you in your own work. In the end, it’s all about creating better experiences for our users. How our sites perform is a big part of that.</p><div class="footnotes"><ol><li id="fn:1"><p>Sadly I forgot to run some speed tests prior to rolling out this change and I didn’t feel like rolling back the site, so I don’t have solid numbers for you. That said, it seemed to shave nearly 2 seconds off of the load time on heavy pages like the post I mentioned.&nbsp;<a href="#fnref:1" class="reversefootnote">&#8617;</a></p></li><li id="fn:2"><p>Again, I don’t have the numbers, but I am routinely seeing <code class="highlighter-rouge">DOMContentLoaded</code> reached between 400-600ms with Service Worker caching in play.&nbsp;<a href="#fnref:2" class="reversefootnote">&#8617;</a></p></li></ol></div></div><footer class="entry__footer"><p class="entry__sharing dont-read">If you liked this post, would you mind sharing it?<br><a class="share-link share-link--twitter" href="https://twitter.com/intent/tweet?original_referer=http://localhost:4000/notebook/speeding-things-up-with-service-worker-resource-hints-and-more/&amp;source=tweetbutton&amp;url=http://localhost:4000/notebook/speeding-things-up-with-service-worker-resource-hints-and-more/"><svg class="share-link__icon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28"><path d="M24.253 8.756C24.69 17.08 18.297 24.182 9.97 24.62c-3.122.162-6.22-.646-8.86-2.32 2.702.18 5.375-.648 7.507-2.32-2.072-.248-3.818-1.662-4.49-3.64.802.13 1.62.077 2.4-.154-2.482-.466-4.312-2.586-4.412-5.11.688.276 1.426.408 2.168.387-2.135-1.65-2.73-4.62-1.394-6.965C5.574 7.816 9.54 9.84 13.802 10.07c-.842-2.738.694-5.64 3.434-6.48 2.018-.624 4.212.043 5.546 1.682 1.186-.213 2.318-.662 3.33-1.317-.386 1.256-1.248 2.312-2.4 2.942 1.048-.106 2.07-.394 3.02-.85-.458 1.182-1.343 2.15-2.48 2.71z"></path></svg> <b class="share-link__text">Share on Twitter</b> </a><a class="share-link share-link--facebook" href="http://www.facebook.com/sharer.php?u=http://localhost:4000/notebook/speeding-things-up-with-service-worker-resource-hints-and-more/"><svg class="share-link__icon" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid" width="29" height="29" viewBox="0 0 29 29"><path d="M26.4 0H2.6C1.714 0 0 1.715 0 2.6v23.8c0 .884 1.715 2.6 2.6 2.6h12.393V17.988h-3.996v-3.98h3.997v-3.062c0-3.746 2.835-5.97 6.177-5.97 1.6 0 2.444.173 2.845.226v3.792H21.18c-1.817 0-2.156.9-2.156 2.168v2.847h5.045l-.66 3.978h-4.386V29H26.4c.884 0 2.6-1.716 2.6-2.6V2.6c0-.885-1.716-2.6-2.6-2.6z" fill-rule="evenodd" class="cls-2"></path></svg> <b class="share-link__text">Post on Facebook</b> </a><a class="share-link share-link--linkedin" href="https://www.linkedin.com/cws/share?url=http://localhost:4000/notebook/speeding-things-up-with-service-worker-resource-hints-and-more/&amp;original_referer=http://localhost:4000/notebook/speeding-things-up-with-service-worker-resource-hints-and-more/"><svg class="share-link__icon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28"><path d="M25.424 15.887v8.447h-4.896v-7.882c0-1.98-.71-3.33-2.48-3.33-1.354 0-2.158.91-2.514 1.802-.13.315-.162.753-.162 1.194v8.216h-4.9s.067-13.35 0-14.73h4.9v2.087c-.01.017-.023.033-.033.05h.032v-.05c.65-1.002 1.812-2.435 4.414-2.435 3.222 0 5.638 2.106 5.638 6.632zM5.348 2.5c-1.676 0-2.772 1.093-2.772 2.54 0 1.42 1.066 2.538 2.717 2.546h.032c1.71 0 2.77-1.132 2.77-2.546C8.056 3.593 7.02 2.5 5.344 2.5h.005zm-2.48 21.834h4.896V9.604H2.867v14.73z"></path></svg> <b class="share-link__text">Share on LinkedIn</b> </a><a class="share-link share-link--googleplus" href="https://plus.google.com/share?url=http://localhost:4000/notebook/speeding-things-up-with-service-worker-resource-hints-and-more/"><svg class="share-link__icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M21 8.29h-1.95v2.6h-2.6v1.82h2.6v2.6H21v-2.6h2.6v-1.885H21V8.29zM7.614 10.306v2.925h3.9c-.26 1.69-1.755 2.925-3.9 2.925-2.34 0-4.29-2.016-4.29-4.354s1.885-4.353 4.29-4.353c1.104 0 2.014.326 2.794 1.105l2.08-2.08c-1.3-1.17-2.924-1.883-4.874-1.883C3.65 4.586.4 7.835.4 11.8s3.25 7.212 7.214 7.212c4.224 0 6.953-2.988 6.953-7.082 0-.52-.065-1.104-.13-1.624H7.614z"></path></svg> <b class="share-link__text">Share on Google+</b> </a><a class="share-link share-link--pinterest" href="http://pinterest.com/pin/create/button/?url=http://localhost:4000/notebook/speeding-things-up-with-service-worker-resource-hints-and-more/&amp;media=http://localhost:4000/i/og-logo.png&amp;description=Speeding Things Up with Service Worker, Resource Hints, and More"><svg class="share-link__icon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28"><path d="M14.02 1.57c-7.06 0-12.784 5.723-12.784 12.785S6.96 27.14 14.02 27.14c7.062 0 12.786-5.725 12.786-12.785 0-7.06-5.724-12.785-12.785-12.785zm1.24 17.085c-1.16-.09-1.648-.666-2.558-1.22-.5 2.627-1.113 5.146-2.925 6.46-.56-3.972.822-6.952 1.462-10.117-1.094-1.84.13-5.545 2.437-4.632 2.837 1.123-2.458 6.842 1.1 7.557 3.71.744 5.226-6.44 2.924-8.775-3.324-3.374-9.677-.077-8.896 4.754.19 1.178 1.408 1.538.49 3.168-2.13-.472-2.764-2.15-2.683-4.388.132-3.662 3.292-6.227 6.46-6.582 4.008-.448 7.772 1.474 8.29 5.24.58 4.254-1.815 8.864-6.1 8.532v.003z"></path></svg> <b class="share-link__text">Share on Pinterest</b></a></p><section class="module module--promotional"><p>Looking for something else to read? These entries may be related in some way:</p><ul class="listing listing--links"><li class="listing_item listing__item--1"><a href="/notebook/the-one-weird-trick-that-takes-the-pain-out-of-cross-browser-testing/">The One Weird Trick That Takes the Pain Out of Cross-browser Testing</a></li><li class="listing_item listing__item--2"><a href="/notebook/google-embraces-progressive-enhancement/">Google Embraces Progressive Enhancement</a></li><li class="listing_item listing__item--3"><a href="/notebook/playing-with-flexbox-and-quantity-queries/">Playing with Flexbox and Quantity Queries</a></li></ul></section></footer><aside class="promo promo--book promo--image"><img class="promo__image" src="https://images1-focus-opensocial.googleusercontent.com/gadgets/proxy?url=https://adaptivewebdesign.info/2nd-edition/cover-320.jpg&amp;container=focus&amp;refresh=2592000" alt=""><div class="promo__copy"><p>Like what you’re reading? You might dig my book <a href="https://adaptivewebdesign.info/2nd-edition/"><cite>Adaptive Web Design, Second Edition</cite></a>. You can grab a copy on <a href="http://www.amazon.com/gp/product/0134216148/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=9325&amp;creativeASIN=0134216148&amp;linkCode=as2&amp;tag=easydesign-20&amp;linkId=7EDENIS3P4XL7LIT">Amazon</a>, <a href="http://www.anrdoezrs.net/links/7941166/type/dlg/http://www.barnesandnoble.com/w/adaptive-web-design-aaron-gustafson/1102101792?ean=9780134216140">Barnes &amp; Noble</a>, <a href="http://click.linksynergy.com/link?id=ksYXFf8a/VY&amp;offerid=145244.2319719&amp;type=2&amp;murl=http%3A%2F%2Fwww.peachpit.com%2Ftitle%2F9780134216140">New Riders</a>, or anywhere web design books are sold.</p></div></aside><hr><section id="disqus" class="entry__comments dont-read"><h1>Comments</h1><div id="disqus_thread" aria-live="polite"><noscript><div class="nojs-fallback"><p>Sadly, I have not had the time to build a JavaScript-less implementation of the Disqus API yet, so you can’t comment. It’s a bummer. I really wanted to hear your thoughts.</p><p>If you use Twitter or Google+, <a href="#webmentions">your webmentions of this post’s URL will show up on this page</a> still.</p></div></noscript></div></section><hr><section id="webmentions" class="entry__comments dont-read"><h1>Webmentions</h1><div class="webmentions"><p class="webmentions__not-found">No webmentions were found</p></div></section></div></article></div></main><hr class="rule rule--optional"><nav role="navigation"><div class="layout-container"><h1 class="hidden">Here’s what you can find on this site:</h1><ul class="main-navigation"><li class="main-navigation__item"><a class="main-navigation__link main-navigation__link--about" href="/about/"><b class="hidden">A Bit </b>About<b class="hidden"> Me</b></a></li><li class="main-navigation__item"><mark><a class="main-navigation__link main-navigation__link--notebook" href="/notebook/"><b class="hidden">Entries in My </b>Notebook</a></mark></li><li class="main-navigation__item"><a class="main-navigation__link main-navigation__link--speaking-engagements" href="/speaking-engagements/"><b class="hidden">A List of My </b>Speaking<b class="hidden"> Engagements</b></a></li><li class="main-navigation__item"><a class="main-navigation__link main-navigation__link--publications" href="/publications/"><b class="hidden">A List of My </b>Publications</a></li><li class="main-navigation__item"><a class="main-navigation__link main-navigation__link--appearances" href="/appearances/"><b class="hidden">Links to </b>Interviews<b class="hidden"> I’ve Given</b></a></li><li class="main-navigation__item"><a class="main-navigation__link main-navigation__link--contact" href="/contact/"><b class="hidden">The Requisite </b>Contact<b class="hidden"> Form</b></a></li><li class="main-navigation__item"><a class="main-navigation__link main-navigation__link--rss" href="/atom.xml" aria-label="subscribe via RSS">RSS</a></li><li class="main-navigation__item"><a class="main-navigation__link main-navigation__link--search" href="#search" aria-label="Search This Site">Search</a></li></ul><form class="form form--search" action="https://www.google.com/search" method="get" id="search"><ol role="search"><li class="form-control form-control--search"><label for="query" class="hidden">What are you looking for?</label><input name="q" type="hidden" value="site:www.aaron-gustafson.com"> <input id="query" type="search" name="q"></li><li class="form-control form-control--buttons"><button type="submit" name="sa" value="Search"><b class="hidden">Let’s see if </b>Google <b class="hidden">Finds </b>it</button></li></ol></form></div></nav><footer role="contentinfo" class="footer"><div class="layout-container"><p class="footer__fork-me">Did you spot a typo or error? Eesh. <a href="https://github.com/aarongustafson/aarongustafson.github.io/tree/source/source/_posts/notebook/_posts/2015-11-20-speeding-things-up-with-service-worker-resource-hints-and-more.markdown">Would you mind fixing it for me?</a> You’re so awesome.</p><p class="footer__copyright"><b id="license">The content of this site is licensed under <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons</a>.</b> Interested in how this site was made? <a href="/colophon/">Check this out</a>.</p></div></footer><script>if ( ! ('AG' in window) ){ window.AG = {}; }
		window.AG.disqus = {
			shortname: 'aarongustafson',
			script: 'embed.js'
		};
		var disqus_config = function () {
			this.page.url = 'http://localhost:4000/notebook/speeding-things-up-with-service-worker-resource-hints-and-more/';
			this.page.identifier = 'http://localhost:4000/notebook/speeding-things-up-with-service-worker-resource-hints-and-more/';
		};</script><script src="/j/main.js"></script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-P3MJZJ&amp;no-js=true" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-P3MJZJ');</script></body></html>