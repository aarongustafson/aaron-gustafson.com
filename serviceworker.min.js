"use strict";var version="v1540592098394:",default_avatar="https://www.gravatar.com/avatar/00000000000000000000000000000000?d=mm&f=y",missing_image="https://i.imgur.com/oWLuFAa.gif";self.addEventListener("activate",function(e){e.waitUntil(caches.keys().then(function(e){return Promise.all(e.filter(function(e){return!e.startsWith(version)}).map(function(e){return caches.delete(e)}))}))}),self.addEventListener("fetch",function(e){var t=e.request,n=t.url,a=["p.typekit.net/p.gif","www.google-analytics.com/r/collect","ogg","mp3","mp4","ogv","webm","chrome-extension"],s=["https://pbs.twimg.com","https://webmention.io/avatar/","https://images1-focus-opensocial.googleusercontent.com/gadgets/proxy","https://disqus.com","https://a.disquscdn.com","https://referrer.disqus.com"];function r(e){var n=e.clone();return caches.open(version+"pages").then(function(e){e.put(t,n)}).then(function(){}),e}function i(){var e=t.headers.get("Accept"),a=new URL(n);return e.indexOf("image")>-1?"www.gravatar.com"===a.host?caches.match(default_avatar):caches.match(missing_image):new Response("<h1>Service Unavailable</h1>",{status:503,statusText:"Service Unavailable",headers:new Headers({"Content-Type":"text/html"})})}"GET"!==t.method||function(){var e=a.length;for(;e--;)if(n.indexOf(a[e])>-1)return!0;return!1}()||e.respondWith(caches.match(t).then(function(e){if(e&&function(){var e=s.length;for(;e--;)if(n.indexOf(s[e])>-1)return!0;return!1}())return e;var a=fetch(t).then(r,i).catch(i);return e||a}))}),self.addEventListener("fetch",function(e){var t,n=e.request,a=n.url,s=new URL(a),r=!1;/\.(?:jpg|png)$/.test(n.url)&&s.origin==location.origin&&(n.headers.has("accept")&&(r=n.headers.get("accept").includes("webp")),r&&(t=a.substr(0,a.lastIndexOf("."))+".webp",e.respondWith(fetch(t,{mode:"no-cors"}))))}),self.addEventListener("install",function(e){var t=["favicon.png","c/default.css","c/advanced.css","j/main.js",default_avatar,missing_image];e.waitUntil(caches.open(version+"assets").then(function(e){return e.addAll(t)}))});