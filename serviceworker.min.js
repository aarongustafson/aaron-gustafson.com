"use strict";var version="v1521688027797:",default_avatar="https://www.gravatar.com/avatar/00000000000000000000000000000000?d=mm&f=y",missing_image="https://i.imgur.com/oWLuFAa.gif";self.addEventListener("activate",function(e){e.waitUntil(caches.keys().then(function(e){return Promise.all(e.filter(function(e){return!e.startsWith(version)}).map(function(e){return caches.delete(e)}))}))}),self.addEventListener("fetch",function(e){function t(){for(var e=o.length;e--;)if(i.indexOf(o[e])>-1)return!0;return!1}function n(e){var t=e.clone();return caches.open(version+"pages").then(function(e){e.put(r,t)}).then(function(){}),e}function a(){var e=r.headers.get("Accept"),t=new URL(i);return e.indexOf("image")>-1?"www.gravatar.com"===t.host?caches.match(default_avatar):caches.match(missing_image):s()}function s(){return new Response("<h1>Service Unavailable</h1>",{status:503,statusText:"Service Unavailable",headers:new Headers({"Content-Type":"text/html"})})}var r=e.request,i=r.url,c=["p.typekit.net/p.gif","www.google-analytics.com/r/collect","ogg","mp3","mp4","ogv","webm","chrome-extension"],o=["https://pbs.twimg.com","https://webmention.io/avatar/","https://images1-focus-opensocial.googleusercontent.com/gadgets/proxy","https://disqus.com","https://a.disquscdn.com","https://referrer.disqus.com"];"GET"!==r.method||function(){for(var e=c.length;e--;)if(i.indexOf(c[e])>-1)return!0;return!1}()||e.respondWith(caches.match(r).then(function(e){if(e&&t())return e;var s=fetch(r).then(n,a).catch(a);return e||s}))}),self.addEventListener("fetch",function(e){var t,n=e.request,a=n.url,s=new URL(a),r=!1;/\.(?:jpg|png)$/.test(n.url)&&s.origin==location.origin&&(n.headers.has("accept")&&(r=n.headers.get("accept").includes("webp")),r&&(t=a.substr(0,a.lastIndexOf("."))+".webp",e.respondWith(fetch(t,{mode:"no-cors"}))))}),self.addEventListener("install",function(e){var t=["favicon.png","c/default.css","c/advanced.css","j/main.js",default_avatar,missing_image];e.waitUntil(caches.open(version+"assets").then(function(e){return e.addAll(t)}))});