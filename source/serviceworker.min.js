"use strict";var version="v1476901650337:",default_avatar="https://www.gravatar.com/avatar/00000000000000000000000000000000?d=mm&f=y",missing_image="https://i.imgur.com/oWLuFAa.gif";self.addEventListener("activate",function(e){e.waitUntil(caches.keys().then(function(e){return Promise.all(e.filter(function(e){return!e.startsWith(version)}).map(function(e){return caches["delete"](e)}))}))}),self.addEventListener("fetch",function(e){function t(){for(var e=o.length;e--;)if(c.indexOf(o[e])>-1)return!0;return!1}function n(){for(var e=u.length;e--;)if(c.indexOf(u[e])>-1)return!0;return!1}function a(e){var t=e.clone();return caches.open(version+"pages").then(function(e){e.put(i,t)}).then(function(){}),e}function s(){var e=i.headers.get("Accept"),t=new URL(c);return e.indexOf("image")>-1?"www.gravatar.com"===t.host?caches.match(default_avatar):caches.match(missing_image):r()}function r(){return new Response("<h1>Service Unavailable</h1>",{status:503,statusText:"Service Unavailable",headers:new Headers({"Content-Type":"text/html"})})}var i=e.request,c=i.url,o=["p.typekit.net/p.gif","www.google-analytics.com/r/collect","ogg","mp3","mp4","ogv","webm","chrome-extension"],u=["https://pbs.twimg.com","https://webmention.io/avatar/","https://images1-focus-opensocial.googleusercontent.com/gadgets/proxy","https://disqus.com","https://a.disquscdn.com","https://referrer.disqus.com"];"GET"!==i.method||t()||e.respondWith(caches.match(i).then(function(e){if(e&&n())return e;var t=fetch(i).then(a,s)["catch"](s);return e||t}))}),self.addEventListener("fetch",function(e){var t,n=e.request,a=n.url,s=new URL(a),r=/\.(?:jpg|png)$/,i=!1;r.test(n.url)&&s.origin==location.origin&&(n.headers.has("accept")&&(i=n.headers.get("accept").includes("webp")),i&&(t=a.substr(0,a.lastIndexOf("."))+".webp",e.respondWith(fetch(t,{mode:"no-cors"}))))}),self.addEventListener("install",function(e){var t=["favicon.png","c/default.css","c/advanced.css","j/main.js",default_avatar,missing_image];e.waitUntil(caches.open(version+"assets").then(function(e){return e.addAll(t)}))});