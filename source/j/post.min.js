!function(e){function n(e){var n,t,d,c=!("data"in e),m=c?e:e.data,r=c?e.element_id:e.id,u=document.querySelectorAll("#webmention-"+r),p=l.li.cloneNode(!0),s=l.article.cloneNode(!0),h=l.author.cloneNode(!0),N=l.author_name.cloneNode(!0),b=l.author_link.cloneNode(!0),_=l.photo.cloneNode(!0),w=l.meta.cloneNode(!0),C=l.time.cloneNode(!0),f=m.name,g=m.content,v=m.url,k=m.author.name,y=m.author.photo,E="";p.id="webmention-"+r,p.appendChild(s),f&&g&&f==g&&(f=!1),k&&(b.href=m.author.url,y&&(_.src=y,b.appendChild(_)),N.appendChild(document.createTextNode(k)),b.appendChild(N),h.appendChild(b),s.appendChild(h)),m.published&&(C.setAttribute("datetime",m.published),d=new Date(m.published),E+=d.getUTCDate()+" ",E+=a[d.getUTCMonth()]+" ",E+=d.getUTCFullYear(),C.appendChild(document.createTextNode(E)),w.appendChild(C)),(f&&0===f.indexOf(k)||g&&0===g.indexOf(k))&&(s.className+=" webmention--author-starts"),f?(s.className+=" webmention--title-only",t=l.a.cloneNode(!0),t.href=v,t.appendChild(document.createTextNode(m.name)),n=l.title.cloneNode(!0),n.appendChild(t),s.appendChild(n),s.appendChild(w)):g&&(s.className+=" webmention--content-only",w.appendChild(document.createTextNode(" | ")),t=l.permalink.cloneNode(!0),t.href=v,w.appendChild(t),s.appendChild(w),n=l.content.cloneNode(!0),n.appendChild(document.createTextNode(g)),s.appendChild(n)),u.length<1?(i&&(i.parentNode.replaceChild(o,i),i=!1),o.appendChild(p)):o.replaceChild(p,u[0]),p=null,u=null,s=null,h=null,b=null,_=null,n=null,t=null,w=null,C=null}"AG"in e||(e.AG={});var t,o=document.querySelectorAll(".webmentions__list"),l={a:document.createElement("a"),author_name:document.createElement("b"),article:document.createElement("article"),div:document.createElement("div"),photo:document.createElement("img"),li:document.createElement("li"),time:document.createElement("time")},a=["January","February","March","April","May","June","July","August","September","October","November","December"],d=e.location.href,i=!1;if(o.length<1){var i=document.querySelectorAll(".webmentions__not-found");if(!i.length)return;i=i[0],o=document.createElement("ol"),o.className="webmentions__list"}else o=o[0];if(l.li.className="webmentions__item",l.article.className="webmention",l.time.className="webmention__pubdate",l.author=l.div.cloneNode(),l.author.className="webmention__author vcard",l.author_name.className="fn",l.author_link=l.a.cloneNode(),l.author_link.className="url",l.photo.className="webmention__author__photo photo",l.photo.alt="",l.title=l.div.cloneNode(),l.title.className="webmention__title",l.permalink=l.a.cloneNode(),l.permalink.className="webmention__source",l.permalink.appendChild(document.createTextNode("Permalink")),l.content=l.div.cloneNode(),l.content.className="webmention__content",l.meta=l.div.cloneNode(),l.meta.className="webmention__meta",e.AG.processWebmentions=function(e){"error"in e||(e.links.reverse(),e.links.forEach(n))},t=document.createElement("script"),t.async=!0,t.src="http://webmention.io/api/mentions?jsonp=window.AG.processWebmentions&target="+d,document.getElementsByTagName("head")[0].appendChild(t),o.length&&"WebSocket"in e){var c=new WebSocket("ws://webmention.io:8080");c.onopen=function(){c.send(d)},c.onmessage=function(e){n(JSON.parse(e.data))}}}(window);