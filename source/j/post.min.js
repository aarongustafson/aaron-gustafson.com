!function(e){if(!(!1 in e)){var t,n,o,a,l,i,r,c,d=e.querySelectorAll("[data-quotable]"),s=d.length,m=/^(blockquote|[uod]l|p|h[1-6])$/,p=/^(body|main|section|article|aside)$/,h=/^h[1-6]$/;if(s)for(l=e.createElement("blockquote"),l.setAttribute("class","quotable"),l.setAttribute("aria-hidden","true"),l.appendChild(e.createElement("p"));s--;){for(t=d[s],n=l.cloneNode(!0),o=t.innerText.split(" "),a=o.pop(),n.querySelector("p").innerText=o.join(" ")+"Â "+a;!t.nodeName.toLowerCase().match(m)&&!t.nodeName.toLowerCase().match(p);)t=t.parentNode;for(i=t.parentNode,r=t.previousElementSibling;r;){if(r.nodeName.toLowerCase().match(h)){c=r;break}r=r.previousElementSibling}if(c)for(r=c.nextElementSibling.nextElementSibling;"blockquote"==r.nodeName.toLowerCase();)r=r.nextElementSibling.nextElementSibling;r?i.insertBefore(n,r):i.insertBefore(n,t)}}}(document),function(e,t){function n(t){console.log("click");var n=t.target;return"a"==t.target.nodeName.toLowerCase()&&e.innerWidth>=a?(t.preventDefault(),e.open(n.href,"share-this","height=300,width=500,status=no,toolbar=no"),!1):void 0}if(!(!1 in t)){var o=t.querySelectorAll(".entry__sharing"),a=640;o.length>0&&o[0].addEventListener("click",n,!1)}}(this,this.document),function(e,t){function n(e){var n=!("data"in e),o=n?e:e.data,a=n?e.element_id:e.id;if(o.url&&o.url.indexOf("twitter.com/")>-1&&(a=o.url.replace(/^.*?status\/(.*)$/,"$1")),!(u.indexOf(a)>-1)){var l,s,p=t.querySelectorAll("#webmention-"+a),h=r.li.cloneNode(!0),b=r.article.cloneNode(!0),N=r.author.cloneNode(!0),f=r.author_name.cloneNode(!0),w=r.author_link.cloneNode(!0),_=r.photo.cloneNode(!0),g=r.meta.cloneNode(!0),C=r.time.cloneNode(!0),v=o.name,y=o.content,E=o.url||e.source,k=e.activity.type,S="like"==k||"repost"==k,A=e.activity.sentence_html,x=o.author?o.author.name:!1,T=o.author?o.author.photo:!1,q=o.published||e.verified_date,L="";h.id="webmention-"+a,h.appendChild(b),x&&(w.href=o.author.url,T&&(_.src=T,w.appendChild(_)),f.appendChild(t.createTextNode(x)),w.appendChild(f),N.appendChild(w),b.appendChild(N),S&&(v=x+" "+v,b.className+=" webmention--author-starts")),q&&(C.setAttribute("datetime",q),q=new Date(q),L+=q.getUTCDate()+" ",L+=d[q.getUTCMonth()]+" ",L+=q.getUTCFullYear(),C.appendChild(t.createTextNode(L)),g.appendChild(C),E&!S&&g.appendChild(t.createTextNode(" | "))),E&!S&&(s=r.permalink.cloneNode(!0),s.href=E,g.appendChild(s)),"reply"==k&&(v=!1),v&&y&&v==y&&(v=!1),v?(b.className+=" webmention--title-only",v=v.replace("reposts","reposted"),E?(s=r.a.cloneNode(!0),s.href=E,s.appendChild(t.createTextNode(v))):s=t.createTextNode(v),l=r.title.cloneNode(!0),l.appendChild(s),b.appendChild(c.cloneNode(!0)),b.appendChild(l)):y&&(b.className+=" webmention--content-only",l=r.content.cloneNode(!0),l.innerHTML=S&&A?A.replace(/href/,'class="p-author h-card" href'):y,b.appendChild(l)),g.children.length>0&&b.appendChild(g),p.length<1?(m&&(m.parentNode.replaceChild(i,m),m=!1),i.appendChild(h)):i.replaceChild(h,p[0]),u.push(a),h=null,p=null,b=null,N=null,w=null,_=null,l=null,s=null,g=null,C=null}}if(!(!1 in t)){"AG"in e||(e.AG={}),e.location.origin||(e.location.origin=e.location.protocol+"//"+e.location.host);var o,a,l,i=t.querySelectorAll(".webmentions__list"),r={a:t.createElement("a"),author_name:t.createElement("b"),article:t.createElement("article"),div:t.createElement("div"),photo:t.createElement("img"),li:t.createElement("li"),time:t.createElement("time")},c=t.createTextNode(" "),d=["January","February","March","April","May","June","July","August","September","October","November","December"],s=[e.location.href.replace("localhost","www.aaron-gustafson.com")],m=!1,p=t.querySelector('meta[property="webmention:redirected_from"]'),h=e.location.origin,u=[],b=0;if(p&&(a=p.getAttribute("content").split(","),a.forEach(function(e){s.push(e.indexOf("//")<0?h+e:e)}),a=!1),i.length<1){var m=t.querySelectorAll(".webmentions__not-found");if(!m.length)return;m=m[0],i=t.createElement("ol"),i.className="webmentions__list"}else{for(i=i[0],l=i.querySelectorAll("[id^=webmention-]"),b=l.length;b--;)u.push(parseInt(l[b].getAttribute("id").replace("webmention-",""),10));l=null}if(r.li.className="webmentions__item",r.article.className="h-cite webmention",r.time.className="webmention__pubdate dt-published",r.author=r.div.cloneNode(),r.author.className="webmention__author p-author h-card",r.author_name.className="p-name",r.author_link=r.a.cloneNode(),r.author_link.className="u-url",r.photo.className="webmention__author__photo u-photo",r.photo.alt="",r.title=r.div.cloneNode(),r.title.className="webmention__title p-name",r.permalink=r.a.cloneNode(),r.permalink.className="webmention__source u-url",r.permalink.appendChild(t.createTextNode("Permalink")),r.content=r.div.cloneNode(),r.content.className="webmention__content p-content",r.meta=r.div.cloneNode(),r.meta.className="webmention__meta",e.AG.processWebmentions=function(e){"error"in e||(e.links.reverse(),e.links.forEach(n))},o=t.createElement("script"),o.async=!0,o.src="http://webmention.io/api/mentions?jsonp=window.AG.processWebmentions&amp;target[]="+s.join("&amp;target[]"),t.getElementsByTagName("head")[0].appendChild(o),i.length&&"WebSocket"in e){var N=new WebSocket("ws://webmention.io:8080");N.onopen=function(){N.send(this_page)},N.onmessage=function(e){n(JSON.parse(e.data))}}}}(this,this.document);