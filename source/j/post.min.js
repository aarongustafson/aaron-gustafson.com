!function(e){function n(e){var n,t,o,d=!("data"in e),r=d?e:e.data,m=d?e.element_id:e.id,u=document.querySelectorAll("#webmention-"+m),p=l.li.cloneNode(!0),s=l.article.cloneNode(!0),h=l.author.cloneNode(!0),N=l.author_name.cloneNode(!0),b=l.author_link.cloneNode(!0),_=l.photo.cloneNode(!0),w=l.meta.cloneNode(!0),C=l.time.cloneNode(!0),f=r.name,g=r.content,y=r.url,k=r.author.name,v=r.author.photo,E="";p.id="webmention-"+m,p.appendChild(s),f&&g&&f==g&&(f=!1),k&&(b.href=r.author.url,v&&(_.src=v,b.appendChild(_)),N.appendChild(document.createTextNode(k)),b.appendChild(N),h.appendChild(b),s.appendChild(h)),r.published&&(C.setAttribute("datetime",r.published),o=new Date(r.published),E+=o.getUTCDate()+" ",E+=i[o.getUTCMonth()]+" ",E+=o.getUTCFullYear(),C.appendChild(document.createTextNode(E)),w.appendChild(C)),(f&&0===f.indexOf(k)||g&&0===g.indexOf(k))&&(s.className+=" webmention--author-starts"),f?(s.className+=" webmention--title-only",y?(t=l.a.cloneNode(!0),t.href=y,t.appendChild(document.createTextNode(r.name))):t=document.createTextNode(r.name),n=l.title.cloneNode(!0),n.appendChild(t),s.appendChild(n),s.appendChild(w)):g&&(s.className+=" webmention--content-only",y&&(w.appendChild(document.createTextNode(" | ")),t=l.permalink.cloneNode(!0),t.href=y,w.appendChild(t)),s.appendChild(w),n=l.content.cloneNode(!0),n.appendChild(document.createTextNode(g)),s.appendChild(n)),u.length<1?(c&&(c.parentNode.replaceChild(a,c),c=!1),a.appendChild(p)):a.replaceChild(p,u[0]),p=null,u=null,s=null,h=null,b=null,_=null,n=null,t=null,w=null,C=null}"AG"in e||(e.AG={}),e.location.origin||(e.location.origin=e.location.protocol+"//"+e.location.host);var t,o,a=document.querySelectorAll(".webmentions__list"),l={a:document.createElement("a"),author_name:document.createElement("b"),article:document.createElement("article"),div:document.createElement("div"),photo:document.createElement("img"),li:document.createElement("li"),time:document.createElement("time")},i=["January","February","March","April","May","June","July","August","September","October","November","December"],d=[e.location.href],c=!1,r=document.querySelector('meta[property="webmention:redirected_from"]'),m=e.location.origin;if(r&&(o=r.getAttribute("content").split(","),o.forEach(function(e){d.push(e.indexOf("//")<0?m+e:e)}),o=!1),a.length<1){var c=document.querySelectorAll(".webmentions__not-found");if(!c.length)return;c=c[0],a=document.createElement("ol"),a.className="webmentions__list"}else a=a[0];if(l.li.className="webmentions__item",l.article.className="h-cite webmention",l.time.className="webmention__pubdate dt-published",l.author=l.div.cloneNode(),l.author.className="webmention__author p-author h-card",l.author_name.className="p-name",l.author_link=l.a.cloneNode(),l.author_link.className="u-url",l.photo.className="webmention__author__photo u-photo",l.photo.alt="",l.title=l.div.cloneNode(),l.title.className="webmention__title p-name",l.permalink=l.a.cloneNode(),l.permalink.className="webmention__source u-url",l.permalink.appendChild(document.createTextNode("Permalink")),l.content=l.div.cloneNode(),l.content.className="webmention__content p-content",l.meta=l.div.cloneNode(),l.meta.className="webmention__meta",e.AG.processWebmentions=function(e){"error"in e||(e.links.reverse(),e.links.forEach(n))},t=document.createElement("script"),t.async=!0,t.src="http://webmention.io/api/mentions?jsonp=window.AG.processWebmentions&amp;target[]="+d.join("&amp;target[]"),document.getElementsByTagName("head")[0].appendChild(t),a.length&&"WebSocket"in e){var u=new WebSocket("ws://webmention.io:8080");u.onopen=function(){u.send(this_page)},u.onmessage=function(e){n(JSON.parse(e.data))}}}(window);