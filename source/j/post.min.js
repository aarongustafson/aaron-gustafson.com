!function(e,t){"use strict";if("querySelectorAll"in t){var n=t.createElement("script"),o=t.querySelector(".entry__jump--webmentions a"),i=t.querySelectorAll(".webmentions__item").length;o.innerHTML=i+" "+o.innerHTML,"AG"in e&&"preconnect"in e.AG?(e.AG.preconnect("//disqus.com/"),e.AG.preconnect("//aarongustafson.disqus.com"),e.AG.preconnect("//links.services.disqus.com/"),e.AG.preconnect("//a.disquscdn.com")):console.log("No preconnect"),n.async=!0,n.type="text/javascript",n.src="//aarongustafson.disqus.com/count.js",(t.head||t.body).appendChild(n)}}(this,this.document),function(e,t){"use strict";var n=t.createElement("script"),o="//"+disqus_shortname+".disqus.com/"+disqus_script;"AG"in e&&"preconnect"in e.AG&&(e.AG.preconnect("//disqus.com/"),e.AG.preconnect("//"+disqus_shortname+".disqus.com"),e.AG.preconnect("//links.services.disqus.com/"),e.AG.preconnect("//a.disquscdn.com"),e.AG.prefetch(o),o.indexOf("count")<0&&e.AG.prefetch("//"+disqus_shortname+".disqus.com/count.js")),n.type="text/javascript",n.async=!0,n.src=o,(t.head||t.body).appendChild(n),n=null}(this,this.document),function(){"use strict";if("onLine"in window.navigator){var e,t,n=!window.navigator.onLine;n&&(e=document.createElement("p"),e.innerText="Your internet connection is currently offline, so I can’t load in the comment thread from Disqus.",t=document.getElementById("disqus"),t.appendChild(e),e=null,t=null)}}(),function(e){"use strict";if("querySelectorAll"in e){var t,n,o,i,l,r,a,c,s=e.querySelectorAll("[data-quotable]"),d=s.length,u=/^(blockquote|[uod]l|p|h[1-6])$/,p=/^(body|main|section|article|aside)$/,m=/^h[1-6]$/;if(d)for(l=e.createElement("blockquote"),l.setAttribute("class","quotable"),l.setAttribute("aria-hidden","true"),l.appendChild(e.createElement("p"));d--;){for(t=s[d],n=l.cloneNode(!0),o=t.innerText.split(" "),i=o.pop(),n.querySelector("p").innerText=o.join(" ")+" "+i;!t.nodeName.toLowerCase().match(u)&&!t.nodeName.toLowerCase().match(p);)t=t.parentNode;for(r=t.parentNode,a=t.previousElementSibling;a;){if(a.nodeName.toLowerCase().match(m)){c=a;break}a=a.previousElementSibling}if(c)for(a=c.nextElementSibling.nextElementSibling;"blockquote"==a.nodeName.toLowerCase();)a=a.nextElementSibling.nextElementSibling;a?r.insertBefore(n,a):r.insertBefore(n,t)}}}(document),function(e,t){"use strict";function n(t){var n=t.target;return"a"==t.target.nodeName.toLowerCase()&&e.innerWidth>=i?(t.preventDefault(),e.open(n.href,"share-this","height=300,width=500,status=no,toolbar=no"),!1):void 0}if("querySelectorAll"in t){var o=t.querySelectorAll(".entry__sharing"),i=640;o.length>0&&o[0].addEventListener("click",n,!1)}}(this,this.document),function(e){"use strict";function t(){for(var e=document.getElementById("webmentions").getElementsByTagName("img"),t=e.length;t--;)e[t].naturalWidth||(e[t].style.visibility="hidden");e=null}"addEventListener"in e&&e.addEventListener("load",t,!1)}(this),function(e,t){"use strict";function n(e){var n=!("data"in e),i=n?e:e.data,l=n?e.element_id:e.id,r=!1,u=!1;if(i.url&&i.url.indexOf("twitter.com/")>-1&&(r=!0,-1==i.url.indexOf("#favorited-by")&&(l=i.url.replace(/^.*?status\/(.*)$/,"$1"))),i.url.indexOf("/googleplus/")&&(u=!0),b.indexOf(l+"")>-1)return void console.log("skipping",l);console.log("adding",l);var m,h,f,g=c.li.cloneNode(!0),N=c.article.cloneNode(!0),w=c.author.cloneNode(!0),_=c.author_name.cloneNode(!0),y=c.author_link.cloneNode(!0),v=c.photo.cloneNode(!0),A=c.meta.cloneNode(!0),q=c.time.cloneNode(!0),C=i.name,x=!1,E=i.content,S=i.url||e.source,k=e.activity.type,G=i.author?i.author.name:!1,T=i.author?i.author.photo:!1,O="";g.id="webmention-"+l,g.appendChild(N),(C||E)&&(G?(T?(v.src=T,y.appendChild(v)):N.className+=" webmention--no-photo",_.appendChild(t.createTextNode(G)),i.author.url?(y.href=i.author.url,y.appendChild(_),w.appendChild(y)):w.appendChild(_),N.appendChild(w)):N.className+=" webmention--no-author",k||(k=u?S.indexOf("/like/")>-1?"like":S.indexOf("/repost/")>-1?"repost":S.indexOf("/comment/")>-1?"reply":"link":"post"),C&&C.length>200&&(C=!1),"post"==k||"link"==k&&!r&&!u?(x=C,!C&&S&&o(S,function(e){e&&linkTitle(g,S,e)})):"like"!=k&&"repost"!=k||(x="like"==k&&r?G+" favorited this.":"repost"==k&&r?G+" retweeted this.":C,N.className+=" webmention--author-starts"),i.published_ts?(f=new Date(0),f.setUTCSeconds(i.published_ts)):(i.published||e.verified_date)&&(f=new Date(i.published||e.verified_date)),f&&(q.setAttribute("datetime",f.toISOString()),O+=f.getUTCDate()+" ",O+=d[f.getUTCMonth()]+" ",O+=f.getUTCFullYear(),q.appendChild(t.createTextNode(O)),A.appendChild(q)),x||(f&&S&&A.appendChild(t.createTextNode(" | ")),S&&(h=c.permalink.cloneNode(!0),h.href=S,A.appendChild(h))),G&&-1==N.className.indexOf("webmention--author-starts")&&(C&&"0"==C.indexOf(G)||E&&"0"==E.indexOf(G))&&(N.className+=" webmention--author-starts"),x?(N.className+=" webmention--title-only",x=x.replace("reposts","reposted"),S?(h=c.a.cloneNode(!0),h.href=S,h.appendChild(t.createTextNode(x))):h=t.createTextNode(x),m=c.title.cloneNode(!0),m.appendChild(h),N.appendChild(s.cloneNode(!0)),N.appendChild(m)):(N.className+=" webmention--content-only",m=c.content.cloneNode(!0),m.innerHTML=E,N.appendChild(m)),A.children.length>0&&N.appendChild(A),p&&(p.parentNode.replaceChild(a,p),p=!1),a.appendChild(g),b.push(l),g=null,N=null,w=null,_=null,y=null,v=null,m=null,h=null,A=null,q=null)}function o(t,n){if("XMLHttpRequest"in e){var i=new XMLHttpRequest;o=function(e,t){var n=!1;e="http://whateverorigin.org/get?url="+encodeURIComponent(e),i.onreadystatechange=function(){4!=this.readyState||n||(n=!0,t(i.responseText))},xhr.onabort=function(){n||(n=!0,t(!1))},i.onerror=i.onabort,i.open("GET",e),i.send(null)}}else o=function(e,t){t(!1)};return o(t,n)}if("querySelectorAll"in t){"AG"in e||(e.AG={}),e.location.origin||(e.location.origin=e.location.protocol+"//"+e.location.host);var i,l,r,a=t.querySelectorAll(".webmentions__list"),c={a:t.createElement("a"),author_name:t.createElement("b"),article:t.createElement("article"),div:t.createElement("div"),photo:t.createElement("img"),li:t.createElement("li"),time:t.createElement("time")},s=t.createTextNode(" "),d=["January","February","March","April","May","June","July","August","September","October","November","December"],u=[e.location.href.replace("localhost","www.aaron-gustafson.com")],p=!1,m=t.querySelector('meta[property="webmention:redirected_from"]'),h=[],f=e.location.origin,b=[],g=0;if(m&&(l=m.getAttribute("content").split(","),l.forEach(function(e){u.push(e.indexOf("//")<0?f+e:e)}),l=!1),"http:"!=e.location.protocol&&(u.forEach(function(e){h.push(e),-1!=e.indexOf("https://")&&h.push(e.replace("https://","http://"))}),u=h,h=!1),a.length<1){if(p=t.querySelectorAll(".webmentions__not-found"),!p.length)return;p=p[0],a=t.createElement("ol"),a.className="webmentions__list"}else{for(a=a[0],console.log("webmentions",a.querySelectorAll("[id^=webmention-]")),r=a.querySelectorAll("[id^=webmention-]"),g=r.length;g--;)b.push(r[g].getAttribute("id").replace("webmention-",""));console.log("existing_webmentions",b),r=null}if(c.li.className="webmentions__item",c.article.className="h-cite webmention",c.time.className="webmention__pubdate dt-published",c.author=c.div.cloneNode(),c.author.className="webmention__author p-author h-card",c.author_name.className="p-name",c.author_link=c.a.cloneNode(),c.author_link.className="u-url",c.photo.className="webmention__author__photo u-photo",c.photo.alt="",c.title=c.div.cloneNode(),c.title.className="webmention__title p-name",c.permalink=c.a.cloneNode(),c.permalink.className="webmention__source u-url",c.permalink.appendChild(t.createTextNode("Permalink")),c.content=c.div.cloneNode(),c.content.className="webmention__content p-content",c.meta=c.div.cloneNode(),c.meta.className="webmention__meta",e.AG.processWebmentions=function(e){"error"in e||(e.links.reverse(),e.links.forEach(n))},"preconnect"in e.AG&&(e.AG.preconnect("//webmention.io"),e.AG.preconnect("ws://webmention.io:8080")),i=t.createElement("script"),i.async=!0,i.src="//webmention.io/api/mentions?jsonp=window.AG.processWebmentions&amp;target[]="+u.join("&amp;target[]="),t.getElementsByTagName("head")[0].appendChild(i),a.length&&"WebSocket"in e){var N=new WebSocket("ws://webmention.io:8080");N.onopen=function(){N.send(e.location)},N.onmessage=function(e){n(JSON.parse(e.data))}}}}(this,this.document);