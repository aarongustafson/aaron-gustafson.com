!function(e){function n(e){var n,t,d,i=!("data"in e),c=i?e:e.data,m=i?e.element_id:e.id,r=document.querySelectorAll("#webmention-"+m),p=a.li.cloneNode(!0),u=a.article.cloneNode(!0),s=a.author.cloneNode(!0),h=a.author_name.cloneNode(!0),N=a.author_link.cloneNode(!0),b=a.photo.cloneNode(!0),_=a.meta.cloneNode(!0),w=a.time.cloneNode(!0),C=c.name,f=c.content,g=c.url,k=c.author.name,v=c.author.photo,y="";p.id="webmention-"+m,p.appendChild(u),C&&f&&C==f&&(C=!1),k&&(N.href=c.author.url,v&&(b.src=v,N.appendChild(b)),h.appendChild(document.createTextNode(k)),N.appendChild(h),s.appendChild(N),u.appendChild(s)),c.published&&(w.setAttribute("datetime",c.published),d=new Date(c.published),y+=d.getUTCDate()+" ",y+=l[d.getUTCMonth()]+" ",y+=d.getUTCFullYear(),w.appendChild(document.createTextNode(y)),_.appendChild(w)),(C&&0===C.indexOf(k)||f&&0===f.indexOf(k))&&(u.className+=" webmention--author-starts"),C?(u.className+=" webmention--title-only",t=a.a.cloneNode(!0),t.href=g,t.appendChild(document.createTextNode(c.name)),n=a.title.cloneNode(!0),n.appendChild(t),u.appendChild(n),u.appendChild(_)):f&&(u.className+=" webmention--content-only",_.appendChild(document.createTextNode(" | ")),t=a.permalink.cloneNode(!0),t.href=g,_.appendChild(t),u.appendChild(_),n=a.content.cloneNode(!0),n.appendChild(document.createTextNode(f)),u.appendChild(n)),r.length<1?o.appendChild(p):o.replaceChild(p,r[0]),p=null,r=null,u=null,s=null,N=null,b=null,n=null,t=null,_=null,w=null}"AG"in e||(e.AG={});var t,o=document.querySelectorAll(".webmentions__list"),a={a:document.createElement("a"),author_name:document.createElement("b"),article:document.createElement("article"),div:document.createElement("div"),photo:document.createElement("img"),li:document.createElement("li"),time:document.createElement("time")},l=["January","February","March","April","May","June","July","August","September","October","November","December"],d=e.location.href;if(!(o.length<1)&&(o=o[0],a.li.className="webmentions__item",a.article.className="webmention",a.time.className="webmention__pubdate",a.author=a.div.cloneNode(),a.author.className="webmention__author vcard",a.author_name.className="fn",a.author_link=a.a.cloneNode(),a.author_link.className="url",a.photo.className="webmention__author__photo photo",a.photo.alt="",a.title=a.div.cloneNode(),a.title.className="webmention__title",a.permalink=a.a.cloneNode(),a.permalink.className="webmention__source",a.permalink.appendChild(document.createTextNode("Permalink")),a.content=a.div.cloneNode(),a.content.className="webmention__content",a.meta=a.div.cloneNode(),a.meta.className="webmention__meta",e.AG.processWebmentions=function(e){e.links.reverse(),e.links.forEach(n)},t=document.createElement("script"),t.async=!0,t.src="http://webmention.io/api/mentions?jsonp=window.AG.processWebmentions&target="+d,document.getElementsByTagName("head")[0].appendChild(t),o.length&&"WebSocket"in e)){var i=new WebSocket("ws://webmention.io:8080");i.onopen=function(){i.send(d)},i.onmessage=function(e){n(JSON.parse(e.data))}}}(window);