!function(e,n){function t(e){var t,o,a,c=!("data"in e),m=c?e:e.data,p=c?e.element_id:e.id,s=n.querySelectorAll("#webmention-"+p),h=i.li.cloneNode(!0),u=i.article.cloneNode(!0),N=i.author.cloneNode(!0),b=i.author_name.cloneNode(!0),_=i.author_link.cloneNode(!0),w=i.photo.cloneNode(!0),C=i.meta.cloneNode(!0),f=i.time.cloneNode(!0),g=m.name,y=m.content,k=m.url,v=m.author.name,E=m.author.photo,A="";h.id="webmention-"+p,h.appendChild(u),g&&y&&g==y&&(g=!1),v&&(_.href=m.author.url,E&&(w.src=E,_.appendChild(w)),b.appendChild(n.createTextNode(v)),_.appendChild(b),N.appendChild(_),u.appendChild(N)),m.published&&(f.setAttribute("datetime",m.published),a=new Date(m.published),A+=a.getUTCDate()+" ",A+=r[a.getUTCMonth()]+" ",A+=a.getUTCFullYear(),f.appendChild(n.createTextNode(A)),C.appendChild(f)),(g&&0===g.indexOf(v)||y&&0===y.indexOf(v))&&(u.className+=" webmention--author-starts"),g?(u.className+=" webmention--title-only",k?(o=i.a.cloneNode(!0),o.href=k,o.appendChild(n.createTextNode(m.name))):o=n.createTextNode(m.name),t=i.title.cloneNode(!0),t.appendChild(o),u.appendChild(t),u.appendChild(C)):y&&(u.className+=" webmention--content-only",k&&(C.appendChild(n.createTextNode(" | ")),o=i.permalink.cloneNode(!0),o.href=k,C.appendChild(o)),u.appendChild(C),t=i.content.cloneNode(!0),t.appendChild(n.createTextNode(y)),u.appendChild(t)),s.length<1?(d&&(d.parentNode.replaceChild(l,d),d=!1),l.appendChild(h)):l.replaceChild(h,s[0]),h=null,s=null,u=null,N=null,_=null,w=null,t=null,o=null,C=null,f=null}if(!(!1 in n)){"AG"in e||(e.AG={}),e.location.origin||(e.location.origin=e.location.protocol+"//"+e.location.host);var o,a,l=n.querySelectorAll(".webmentions__list"),i={a:n.createElement("a"),author_name:n.createElement("b"),article:n.createElement("article"),div:n.createElement("div"),photo:n.createElement("img"),li:n.createElement("li"),time:n.createElement("time")},r=["January","February","March","April","May","June","July","August","September","October","November","December"],c=[e.location.href],d=!1,m=n.querySelector('meta[property="webmention:redirected_from"]'),p=e.location.origin;if(m&&(a=m.getAttribute("content").split(","),a.forEach(function(e){c.push(e.indexOf("//")<0?p+e:e)}),a=!1),l.length<1){var d=n.querySelectorAll(".webmentions__not-found");if(!d.length)return;d=d[0],l=n.createElement("ol"),l.className="webmentions__list"}else l=l[0];if(i.li.className="webmentions__item",i.article.className="h-cite webmention",i.time.className="webmention__pubdate dt-published",i.author=i.div.cloneNode(),i.author.className="webmention__author p-author h-card",i.author_name.className="p-name",i.author_link=i.a.cloneNode(),i.author_link.className="u-url",i.photo.className="webmention__author__photo u-photo",i.photo.alt="",i.title=i.div.cloneNode(),i.title.className="webmention__title p-name",i.permalink=i.a.cloneNode(),i.permalink.className="webmention__source u-url",i.permalink.appendChild(n.createTextNode("Permalink")),i.content=i.div.cloneNode(),i.content.className="webmention__content p-content",i.meta=i.div.cloneNode(),i.meta.className="webmention__meta",e.AG.processWebmentions=function(e){"error"in e||(e.links.reverse(),e.links.forEach(t))},o=n.createElement("script"),o.async=!0,o.src="http://webmention.io/api/mentions?jsonp=window.AG.processWebmentions&amp;target[]="+c.join("&amp;target[]"),n.getElementsByTagName("head")[0].appendChild(o),l.length&&"WebSocket"in e){var s=new WebSocket("ws://webmention.io:8080");s.onopen=function(){s.send(this_page)},s.onmessage=function(e){t(JSON.parse(e.data))}}}}(this,this.document);