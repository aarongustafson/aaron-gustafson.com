!function(e){function n(e){var n,t,i,d=!("data"in e),c=d?e:e.data,m=d?e.element_id:e.id,r=document.querySelectorAll("#webmention-"+m),p=l.li.cloneNode(!0),u=l.article.cloneNode(!0),s=l.author.cloneNode(!0),h=l.author_link.cloneNode(!0),N=l.photo.cloneNode(!0),b=l.meta.cloneNode(!0),w=l.time.cloneNode(!0),_=c.name,C=c.content,f=c.url,g=c.author.name,k=c.author.photo,v="";p.id="webmention-"+m,p.appendChild(u),_&&C&&_==C&&(_=!1),g&&(h.href=c.author.url,k&&(N.src=k,h.appendChild(N)),h.appendChild(document.createTextNode(g)),s.appendChild(h),u.appendChild(s)),c.published&&(w.setAttribute("datetime",c.published),i=new Date(c.published),v+=i.getUTCDate()+" ",v+=a[i.getUTCMonth()]+" ",v+=i.getUTCFullYear(),w.appendChild(document.createTextNode(v)),b.appendChild(w)),(_&&0===_.indexOf(g)||C&&0===C.indexOf(g))&&(u.className+=" webmention--author-starts"),_?(u.className+=" webmention--title-only",t=l.a.cloneNode(!0),t.href=f,t.appendChild(document.createTextNode(c.name)),n=l.title.cloneNode(!0),n.appendChild(t),u.appendChild(n),u.appendChild(b)):C&&(u.className+=" webmention--content-only",b.appendChild(document.createTextNode(" | ")),t=l.permalink.cloneNode(!0),t.href=f,b.appendChild(t),u.appendChild(b),n=l.content.cloneNode(!0),n.appendChild(document.createTextNode(C)),u.appendChild(n)),r.length<1?o.appendChild(p):o.replaceChild(p,r[0]),p=null,r=null,u=null,s=null,h=null,N=null,n=null,t=null,b=null,w=null}"AG"in e||(e.AG={});var t,o=document.querySelectorAll(".webmentions__list"),l={a:document.createElement("a"),article:document.createElement("article"),div:document.createElement("div"),photo:document.createElement("img"),li:document.createElement("li"),time:document.createElement("time")},a=["January","February","March","April","May","June","July","August","September","October","November","December"],i=e.location.href;if(!(o.length<1)&&(o=o[0],l.li.className="webmentions__item",l.article.className="webmention",l.time.className="webmention__pubdate",l.author=l.div.cloneNode(),l.author.className="webmention__author vcard",l.author_link=l.a.cloneNode(),l.author_link.className="fn url",l.photo.className="webmention__author__photo photo",l.photo.alt="",l.title=l.div.cloneNode(),l.title.className="webmention__title",l.permalink=l.a.cloneNode(),l.permalink.className="webmention__source",l.permalink.appendChild(document.createTextNode("Permalink")),l.content=l.div.cloneNode(),l.content.className="webmention__content",l.meta=l.div.cloneNode(),l.meta.className="webmention__meta",e.AG.processWebmentions=function(e){e.links.reverse(),e.links.forEach(n)},t=document.createElement("script"),t.async=!0,t.src="http://webmention.io/api/mentions?jsonp=window.AG.processWebmentions&target="+i,document.getElementsByTagName("head")[0].appendChild(t),o.length&&"WebSocket"in e)){var d=new WebSocket("ws://webmention.io:8080");d.onopen=function(){d.send(i)},d.onmessage=function(e){n(JSON.parse(e.data))}}}(window);