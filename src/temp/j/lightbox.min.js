!(function (e) {
	if ("querySelector" in e && "closest" in e.body) {
		var t, n, i;
		((t = e.createElement("dialog")),
			(n = e.createElement("script")),
			(i = e.createElement("link")),
			"[object HTMLUnknownElement]" === {}.toString.call(t) &&
				((n.src = "/j/dialog-polyfill.js"),
				(n.async = !0),
				e.head.appendChild(n),
				(i.rel = "stylesheet"),
				(i.href = "/c/dialog-polyfill.css"),
				e.head.appendChild(i)));
		var o,
			c,
			l = !1,
			r = !1,
			a = e.getElementById("lightbox"),
			u = a.querySelector(".lightbox__image"),
			s = a.querySelector(".lightbox__caption"),
			f = a.querySelector("button[class$=prev]"),
			d = a.querySelector("button[class$=next]"),
			g = a.querySelector("button[class$=close]"),
			h = [],
			m = 0,
			y = "[data-lightbox-item]",
			v = "lightbox--fade",
			p = 500,
			b =
				"https://res.cloudinary.com/aarongustafson/image/fetch/c_fill,f_auto,q_auto,w_1080/";
		window.watchResize(function () {
			var t = window.getActiveMQ(),
				n = "medium" == t || "full" == t;
			n
				? (l ||
						(!(function () {
							var t = e.querySelectorAll(y),
								n = t.length;
							c = t.length - 1;
							for (; n--; )
								((i = t[n]),
									h.unshift({
										img: i.querySelector("a").href,
										title: i.querySelector("figcaption").innerHTML,
									}),
									E(t[n]),
									L(t[n], n));
							var i;
						})(),
						(l = !0)),
					f.addEventListener("click", w, !1),
					d.addEventListener("click", _, !1),
					g.addEventListener("click", T, !1),
					(r = !0))
				: !n &&
					r &&
					(f.removeEventListener("click", w, !1),
					d.removeEventListener("click", _, !1),
					g.removeEventListener("click", T, !1),
					(r = !1));
		});
	}
	function E(e) {
		e.querySelector("a").addEventListener("click", k, !1);
	}
	function L(e, t) {
		e.dataset.lightboxIndex = t;
	}
	function q() {
		S(function () {
			((u.style.backgroundImage = "url(" + b + h[m].img + ")"),
				(s.innerHTML = h[m].title));
		});
	}
	function x(e) {
		(a.classList.add(v), "function" == typeof e && setTimeout(e, p));
	}
	function S(e) {
		setTimeout(function () {
			("function" == typeof e && e(), a.classList.remove(v));
		}, p);
	}
	function k(e) {
		r &&
			(e.preventDefault(),
			(o = e.target),
			(m = o.closest(y).dataset.lightboxIndex),
			x(function () {
				(q(),
					a.showModal(),
					S(function () {
						a.focus();
					}));
			}));
	}
	function _() {
		(++m > c && (m = 0), M());
	}
	function w() {
		(--m < 0 && (m = c), M());
	}
	function M() {
		x(function () {
			q();
		});
	}
	function T() {
		x(function () {
			((current_index = null), a.close(), o.focus());
		});
	}
})(this.document);
